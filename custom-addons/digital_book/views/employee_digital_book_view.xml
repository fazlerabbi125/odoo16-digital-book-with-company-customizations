<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="employee_digital_book_form" model="ir.ui.view">
        <field name="name">employee.digital.book.form</field>
        <field name="model">employee.digital.book</field>
        <field name="arch" type="xml">
            <form string="Employee Digital Book">
                <sheet>
                    <group>
                        <group>
                            <field name="title"/>
                            <field name="employee_id" options="{'no_create': True, 'no_edit': True}"/>
                            <field name="category_id"/>
                        </group>
                        <group>
                            <field name="type_id"/>
                            <field name="attachment" filename="file_name"
                                   attrs="{'invisible': [('type_id', '=', False)]}"
                                   widget="binary"
                            />
                            <!--  options="{'accepted_file_extensions': '.pdf, .csv, .doc, .docx'}"-->
                            <field name="file_name" invisible="1"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="employee_digital_book_tree" model="ir.ui.view">
        <field name="name">employee.digital.book.tree</field>
        <field name="model">employee.digital.book</field>
        <field name="arch" type="xml">
            <tree string="Employee Digital Books">
                <field name="title"/>
                <field name="employee_id"/>
                <field name="category_id"/>
                <field name="file_name" string="Attachment"/>
                <field name="create_date"/>
            </tree>
        </field>
    </record>

    <record id="employee_digital_book_search" model="ir.ui.view">
        <field name="name">employee.digital.book.search</field>
        <field name="model">employee.digital.book</field>
        <field name="arch" type="xml">
            <search string="Employee Digital Book Search">
                <field name="title" string="Title/Employee/File"
                       filter_domain="['|','|',('title', 'ilike', self), ('employee_id', 'ilike', self), ('file_name', 'ilike', self)]"/>
                <field name="category_id"/>
                <field name="type_id"/>
                <group expand="0" string="Group By">
                    <filter string="Category" name="group_by_category" context="
                    {'group_by':'category_id'}"/>
                    <filter string="Document Type" name="group_by_document_type" context="
                    {'group_by':'type_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="action_employee_digital_book" model="ir.actions.act_window">
        <field name="name">Employee Digital Books</field>
        <field name="res_model">employee.digital.book</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="employee_digital_book_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a digital book
            </p>
        </field>
    </record>
</odoo>